!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(3600*(e=moment(e)).hour()+60*e.minute()+e.second())/86400}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var l=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elem={state:t.querySelectorAll("input[name='state']"),next_activate:t.querySelector("input[name='next_activate']"),time:n},Object.freeze(this),this._elem.time.addEventListener("input",(function(){r.enabled&&(r._elem.next_activate.value=r._nextActivation())}))}var t,n,r;return t=e,(n=[{key:"tick",value:function(){"primed"===this.state?this._tryToActivate():"snooze"===this.state&&this._tryToActivate()}},{key:"_nextActivation",value:function(){var e=this.time;if(null===e)return null;var t=new Date,n=new Date(t);return n.setHours(e.getHours(),e.getMinutes(),0,0),n<t&&n.setDate(n.getDate()+1),n}},{key:"_tryToActivate",value:function(){var e=new Date,t=new Date(this._elem.next_activate.value);null!==t&&e>=t&&(this._state="active")}},{key:"state",get:function(){return Array.filter(this._elem.state,(function(e){return e.checked}))[0].value}},{key:"_state",set:function(e){var t=this.state;e!==t&&(Array.filter(this._elem.state,(function(t){return t.value===e}))[0].checked=!0,this.time,"stored"===e?this._elem.next_activate.value=null:"primed"!==e&&"active"!==e||(this._elem.next_activate.value=this._nextActivation()))}},{key:"time",get:function(){var e=this._elem.time.value.split(":"),t=e[0],n=e[1];if(""===t)return null;void 0===n|""===n&&(n=0);var r=new Date;return r.setHours(t,n,0,0),r}},{key:"enabled",get:function(){return"stored"!==this.state},set:function(e){"stored"===this.state&&e?this._state="primed":"primed"!==this.state||e||(this._state="stored")}}])&&a(t.prototype,n),r&&a(t,r),e}();document.addEventListener("DOMContentLoaded",(function(){for(var e=0,t=[i,o,u,c,s];e<t.length;e++){var n=t[e];n._init(),delete n._init,Object.freeze(n)}document.dispatchEvent(new CustomEvent("PinoutReady"))}));var i={_elem:{a:null,b:null},_init:function(){i._elem.a=document.querySelector("#now"),i._elem.b=document.querySelector("#alarm-configs").querySelector("button[name='enable']")}},o={_elem:{day:null,year:null,alarms:null},_init:function(){o._elem.day=document.querySelector("#clock #hour"),o._elem.year=document.querySelector("#clock #year"),o._elem.alarms=document.querySelector("#alarms")},set hour(e){var t=r(e);o._elem.day.setAttribute("transform","rotate(".concat(360*t,")"))},set ecliptic(e){var t=function(e){e=moment(e);var t=moment(new Date(e.year(),2,20)),n=e.dayOfYear()-t.dayOfYear();return n<0&&(n+=365),n/365}(e);o._elem.year.setAttribute("transform","rotate(".concat(360*t,")"))},set alarms(e){for(;o._elem.alarms.childNodes.length;)o._elem.alarms.removeChild(o._elem.alarms.childNodes[0]);var t=!0,n=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(t=(l=i.next()).done);t=!0){var u=l.value,c=u.time;if(u.enabled&&null!==c){var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d","M0.004,0 L0,0.8 L-0.004,0 Z"),s.setAttribute("transform","rotate(".concat(360*r(c),")")),s.setAttribute("class","hand"),o._elem.alarms.appendChild(s)}}}catch(e){n=!0,a=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}},u={_elems:[],_init:function(){var e=document.querySelector("#alarm-configs");u._elems.push(new l(e,e.querySelector("input[name='time']")))}},c={_elem:null,_elems:null,_init:function(){c._elem=document.querySelector("#geolocation"),c._elems={lat:c._elem.querySelector("input[name='lat']"),lon:c._elem.querySelector("input[name='lon']")}},get value(){return{lat:c._elems.lat.value,lon:c._elems.lon.value}}},s={_elem:{coords:null,zenith:null},_init:function(){s._elem.coords=document.querySelector("#local-coords"),s._elem.zenith=s._elem.coords.querySelector("circle")},set latlon(e){var t=e.lat;e.lon;if(null===t);else{var n=Math.abs(t)*(2*Math.PI/360);s._elem.zenith.setAttribute("cy",-.66188*Math.cos(n)/(1+Math.sin(n)))}}};function m(e){return e(),e}document.addEventListener("PinoutReady",(function(){var e=u._elems[0],t=new Audio("tng_bridge_1.mp3");setInterval(m((function(){var n=new Date;o.hour=n,o.ecliptic=n,e.tick(),"active"===e.state&&t.paused&&t.play()})),1e3),c._elem.addEventListener("input",m((function(){return s.latlon=c.value}))),e._elem.time.addEventListener("input",m((function(){return o.alarms=[e]}))),i._elem.a.addEventListener("click",(function(){t.paused?t.play():(t.pause(),t.currentTime=0)})),i._elem.b.addEventListener("click",(function(t){t.preventDefault(),e.enabled=!e.enabled,o.alarms=[e]}))}))}]);
//# sourceMappingURL=bundle.js.map